<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Project Dashboard</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/style.css"/>
        <script src="/js/main.js"></script>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
            }
            header, main, footer {
                padding: 20px;
            }
            nav {
                position: relative;
            }
            nav a {
                margin: 0 10px;
                text-decoration: none;
                color: #333;
                position: relative;
            }
            nav a:hover {
                color: #333; /* Ensure no color change on hover */
            }
            nav a.active::after {
                content: '';
                position: absolute;
                bottom: -5px;
                left: 0;
                width: 100%;
                height: 2px;
                background: #333;
                transition: left 0.3s ease, width 0.3s ease;
            }
            #content {
                max-width: 900px;
                margin: 0 auto;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
            iframe.pdf-frame {
                width: 100%;
                height: 800px;
                border: none;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                cursor: pointer;
            }
            .pdf-container {
                position: relative;
                margin: 20px 0;
                overflow: hidden;
                border-radius: 8px;
            }
            .pdf-controls {
                position: absolute;
                top: 10px;
                right: 10px;
                background: rgba(0, 0, 0, 0.5);
                color: #fff;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                display: flex;
                gap: 5px;
            }
            .pdf-controls div {
                padding: 5px 10px;
                background: rgba(0, 0, 0, 0.7);
                border-radius: 5px;
            }
        </style>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="info">
                    <h1>Project Dashboard</h1>
                    <span>
                        nalanmanou@uchicago.edu â€¢ <a href="https://www.linkedin.com/in/nathan-alanmanou-136a75214/">LinkedIn</a>
                    </span>
                </div>
            </div>
        </header>
        <main>
            <nav>
                <a href="/dashboard" onclick="showSection('dashboard'); event.preventDefault();">Dashboard</a>
                <a href="/model" onclick="showSection('model'); event.preventDefault();">Model</a>
                <a href="/documentation" onclick="showSection('documentation'); event.preventDefault();">Documentation</a>
            </nav>

            <div id="content">
                <section id="dashboard" style="display:none;">
                    <!-- Dashboard content here -->
                </section>

                <section id="model" style="display:none;">
                    <!-- Model content here -->
                </section>

                <section id="documentation" style="display:none;">
                    <h2>Documentation</h2>
                    <div class="pdf-container">
                        <iframe class="pdf-frame" src="/assets/testpdf.pdf" id="pdfViewer"></iframe>
                        <div class="pdf-controls">
                            <div id="prevPage">Previous</div>
                            <div id="nextPage">Next</div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        <footer>
            <h1>If you encounter any issues or bugs please report them <a href="javascript:void(0);" onclick="showSection('report')">here</a></h1>
        </footer>

        <script>
            document.getElementById('prevPage').addEventListener('click', function() {
                var iframe = document.getElementById('pdfViewer');
                iframe.contentWindow.PDFViewerApplication.page--;
            });
            document.getElementById('nextPage').addEventListener('click', function() {
                var iframe = document.getElementById('pdfViewer');
                iframe.contentWindow.PDFViewerApplication.page++;
            });
            document.querySelector('.pdf-frame').addEventListener('click', function() {
                var iframe = document.getElementById('pdfViewer');
                iframe.contentWindow.PDFViewerApplication.page++;
            });

            function showSection(sectionId) {
                const sections = document.querySelectorAll('#content > section');
                sections.forEach(section => {
                    section.style.display = 'none';
                });

                const activeSection = document.getElementById(sectionId);
                if (activeSection) {
                    activeSection.style.display = 'block';
                } else {
                    console.error('Section with ID ' + sectionId + ' not found.');
                }

                updateActiveLink(sectionId);
                updateURL(sectionId);
            }

            function updateActiveLink(activeSectionId) {
                const navLinks = document.querySelectorAll('nav a');
                navLinks.forEach(link => {
                    const sectionName = link.getAttribute('onclick').match(/'([^']+)'/)[1];
                    link.classList.remove('active');
                    if (sectionName === activeSectionId) {
                        link.classList.add('active');
                    }
                });
            }

            function updateURL(sectionId) {
                const newURL = `/${sectionId}`;
                history.pushState({ section: sectionId }, '', newURL);
            }

            function handleNavigation() {
                const pathSegments = window.location.pathname.split('/').filter(segment => segment);
                const sectionId = pathSegments[0];

                if (sectionId) {
                    showSection(sectionId);
                } else {
                    const savedSection = localStorage.getItem('activeSection') || 'dashboard';
                    showSection(savedSection);
                }
            }

            document.addEventListener('DOMContentLoaded', () => {
                handleNavigation();

                const navLinks = document.querySelectorAll('nav a');
                navLinks.forEach(link => {
                    link.addEventListener('click', function(event) {
                        const sectionId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                        showSection(sectionId);
                        event.preventDefault();
                    });
                });
            });

            window.addEventListener('popstate', (event) => {
                handleNavigation();
            });
        </script>
    </body>
</html>
